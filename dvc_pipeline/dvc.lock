schema: '2.0'
stages:
  generate_data:
    cmd: python src/generate_data.py
    deps:
    - path: src/generate_data.py
      md5: 461a96237cb07d1e92c60d4f3f5afa7e
      size: 548
    outs:
    - path: data/test_x
      md5: 5daacffbbe19f519310484a992208c58
      size: 809
    - path: data/test_x.mlem
      md5: bbd0d796c042477e868de2d2c5031e8b
      size: 697
    - path: data/test_y
      md5: e8022b990ac942c1b6e60cc39d422287
      size: 214
    - path: data/test_y.mlem
      md5: b8239e32890452fe6119b7c832efea82
      size: 459
    - path: data/train
      md5: a219ca631b081ea1222a56fa5e65ddc4
      size: 2464
    - path: data/train.mlem
      md5: 7163eadf63a37e7b59d084892a419d57
      size: 743
  train:
    cmd: python src/train.py data/train data/model
    deps:
    - path: data/train
      md5: a219ca631b081ea1222a56fa5e65ddc4
      size: 2464
    - path: src/train.py
      md5: 69095585787167829d98af78611c3e70
      size: 1040
    params:
      params.yaml:
        train.min_split: 2
        train.n_est: 50
        train.seed: 20170428
    outs:
    - path: data/model
      md5: 4427a8e5be44d9e569a3c54c1061ed1e
      size: 81807
    - path: data/model.mlem
      md5: 42b087c7defc457c9d534698c9da1348
      size: 2360
  predict:
    cmd: mlem apply latest data/test_x -m predict_proba -o data/pred
    deps:
    - path: data/model
      md5: 4427a8e5be44d9e569a3c54c1061ed1e
      size: 81807
    - path: data/test_x
      md5: 5daacffbbe19f519310484a992208c58
      size: 809
    outs:
    - path: data/pred
      md5: 3e8ad4f382814eeb49f484f293f5fbd0
      size: 354
    - path: data/pred.mlem
      md5: 88241bea46869d1612810a8b07c9b73a
      size: 340
  score:
    cmd: python src/score.py data/pred data/test_y scores.json
    deps:
    - path: data/pred
      md5: 3e8ad4f382814eeb49f484f293f5fbd0
      size: 354
    - path: data/test_y
      md5: e8022b990ac942c1b6e60cc39d422287
      size: 214
    - path: src/score.py
      md5: c15f2cbcb74ab4de4fc8bfffaf65c7bd
      size: 666
    outs:
    - path: scores.json
      md5: bd0299979bffde632d97a70887c050d6
      size: 22
