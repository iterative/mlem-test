schema: '2.0'
stages:
  generate_data:
    cmd: python src/generate_data.py
    deps:
    - path: src/generate_data.py
      md5: 461a96237cb07d1e92c60d4f3f5afa7e
      size: 548
    outs:
    - path: data/test_x/artifacts
      md5: d1baab7d5d4ea6ff57ee36d2e3593c69.dir
      size: 809
      nfiles: 1
    - path: data/test_x/mlem.yaml
      md5: 2751a5078d553764dbaf898faf35f8f5
      size: 438
    - path: data/test_y/artifacts
      md5: e1a327814241a79adfccb262047c477a.dir
      size: 214
      nfiles: 1
    - path: data/test_y/mlem.yaml
      md5: 0232010fa698e5c195f1e8fb9400cc40
      size: 313
    - path: data/train/artifacts
      md5: 441b348cea911502dd050356e09b9a01.dir
      size: 2464
      nfiles: 1
    - path: data/train/mlem.yaml
      md5: f14ce5310e7483ab4deba7d63e772f50
      size: 463
  train:
    cmd: python src/train.py data/train data/model
    deps:
    - path: data/train
      md5: 33053e222c12c3ac59aeae3039f513d9.dir
      size: 2938
      nfiles: 3
    - path: src/train.py
      md5: 2bb80c065990598550f7ae77ec11062d
      size: 1044
    params:
      params.yaml:
        train.min_split: 2
        train.n_est: 50
        train.seed: 20170428
    outs:
    - path: data/model/artifacts
      md5: c363d9505da3746dd917423868262383.dir
      size: 88011
      nfiles: 1
    - path: data/model/mlem.yaml
      md5: 37e6802352ca1ea1c34d4c11df58af1a
      size: 2362
  predict:
    cmd: mlem apply latest data/test_x -m predict_proba -o data/pred
    deps:
    - path: data/model
      md5: 0ca07f9e955439cd1564d8a69a6b6ce6.dir
      size: 90384
      nfiles: 3
    - path: data/test_x
      md5: 50ada07e0ee50b126eccf6f4b676e5ae.dir
      size: 1258
      nfiles: 3
    outs:
    - path: data/pred/artifacts
      md5: 6ae3a282c962c56d837eb75afee40bb3.dir
      size: 354
      nfiles: 1
    - path: data/pred/mlem.yaml
      md5: 398fcc29e29a6b71393a4d301341be2f
      size: 243
  score:
    cmd: python src/score.py data/pred data/test_y scores.json
    deps:
    - path: data/pred
      md5: 630324efcf5a0e0c7cf96112ca2e86ba.dir
      size: 608
      nfiles: 3
    - path: data/test_y
      md5: 0788b981fc929e817a1649f12ab9e103.dir
      size: 538
      nfiles: 3
    - path: src/score.py
      md5: c15f2cbcb74ab4de4fc8bfffaf65c7bd
      size: 666
    outs:
    - path: scores.json
      md5: bd0299979bffde632d97a70887c050d6
      size: 22
