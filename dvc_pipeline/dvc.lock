schema: '2.0'
stages:
  generate_data:
    cmd: python src/generate_data.py
    deps:
    - path: src/generate_data.py
      md5: 461a96237cb07d1e92c60d4f3f5afa7e
      size: 548
    outs:
    - path: data/test_x
      md5: 5daacffbbe19f519310484a992208c58
      size: 809
    - path: data/test_x.mlem
      md5: 766671010d4625b3f35ac0471e2bb90d
      size: 479
    - path: data/test_y
      md5: e8022b990ac942c1b6e60cc39d422287
      size: 214
    - path: data/test_y.mlem
      md5: 9ed1872c53aca0ba4dc77e52ec03e205
      size: 354
    - path: data/train
      md5: a219ca631b081ea1222a56fa5e65ddc4
      size: 2464
    - path: data/train.mlem
      md5: 8090c9547b3e04d954bad88bbff77a82
      size: 504
  train:
    cmd: python src/train.py data/train data/model
    deps:
    - path: data/train
      md5: a219ca631b081ea1222a56fa5e65ddc4
      size: 2464
    - path: src/train.py
      md5: 2bb80c065990598550f7ae77ec11062d
      size: 1044
    params:
      params.yaml:
        train.min_split: 2
        train.n_est: 50
        train.seed: 20170428
    outs:
    - path: data/model
      md5: c250d4ecd5bedad1a2968a3bac813a0e
      size: 81807
    - path: data/model.mlem
      md5: b74744d886e03a04560b5ea88e0861b2
      size: 2404
  predict:
    cmd: mlem apply latest data/test_x -m predict_proba -o data/pred
    deps:
    - path: data/model
      md5: c250d4ecd5bedad1a2968a3bac813a0e
      size: 81807
    - path: data/test_x
      md5: 5daacffbbe19f519310484a992208c58
      size: 809
    outs:
    - path: data/pred
      md5: 3e8ad4f382814eeb49f484f293f5fbd0
      size: 354
    - path: data/pred.mlem
      md5: 94920bca8ee43c8eb4bd902bd8365c19
      size: 282
  score:
    cmd: python src/score.py data/pred data/test_y scores.json
    deps:
    - path: data/pred
      md5: 3e8ad4f382814eeb49f484f293f5fbd0
      size: 354
    - path: data/test_y
      md5: e8022b990ac942c1b6e60cc39d422287
      size: 214
    - path: src/score.py
      md5: c15f2cbcb74ab4de4fc8bfffaf65c7bd
      size: 666
    outs:
    - path: scores.json
      md5: bd0299979bffde632d97a70887c050d6
      size: 22
