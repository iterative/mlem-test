schema: '2.0'
stages:
  generate_data:
    cmd: python src/generate_data.py
    deps:
    - path: src/generate_data.py
      md5: 461a96237cb07d1e92c60d4f3f5afa7e
      size: 548
    outs:
    - path: data/test_x
      md5: 5daacffbbe19f519310484a992208c58
      size: 809
    - path: data/test_x.mlem
      md5: 00496bbddb974d4be9d4690edc4add14
      size: 495
    - path: data/test_y
      md5: e8022b990ac942c1b6e60cc39d422287
      size: 214
    - path: data/test_y.mlem
      md5: f8302e756beef58a42d8579f51f047f0
      size: 370
    - path: data/train
      md5: a219ca631b081ea1222a56fa5e65ddc4
      size: 2464
    - path: data/train.mlem
      md5: 5589f8a8da24c5f3942e5c0c6024faa5
      size: 520
  train:
    cmd: python src/train.py data/train data/model
    deps:
    - path: data/train
      md5: a219ca631b081ea1222a56fa5e65ddc4
      size: 2464
    - path: src/train.py
      md5: 2bb80c065990598550f7ae77ec11062d
      size: 1044
    params:
      params.yaml:
        train.min_split: 2
        train.n_est: 50
        train.seed: 20170428
    outs:
    - path: data/model
      md5: c250d4ecd5bedad1a2968a3bac813a0e
      size: 81807
    - path: data/model.mlem
      md5: f121a2fc14f5d283b55d250e5b58a74a
      size: 2420
  predict:
    cmd: mlem apply latest data/test_x -m predict_proba -o data/pred
    deps:
    - path: data/model
      md5: c250d4ecd5bedad1a2968a3bac813a0e
      size: 81807
    - path: data/test_x
      md5: 5daacffbbe19f519310484a992208c58
      size: 809
    outs:
    - path: data/pred
      md5: 3e8ad4f382814eeb49f484f293f5fbd0
      size: 354
    - path: data/pred.mlem
      md5: 1079a0bc6da2ddc91d81d94e4690edf4
      size: 298
  score:
    cmd: python src/score.py data/pred data/test_y scores.json
    deps:
    - path: data/pred
      md5: 3e8ad4f382814eeb49f484f293f5fbd0
      size: 354
    - path: data/test_y
      md5: e8022b990ac942c1b6e60cc39d422287
      size: 214
    - path: src/score.py
      md5: c15f2cbcb74ab4de4fc8bfffaf65c7bd
      size: 666
    outs:
    - path: scores.json
      md5: bd0299979bffde632d97a70887c050d6
      size: 22
